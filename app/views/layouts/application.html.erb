<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <title><%= h(yield(:title) || 'Experience') %></title>

  <%= stylesheet_link_tag 'scaffold', 'colorPicker', 'application' %>
  <%= javascript_include_tag 'jquery' %>
  <%= yield(:head) %>
</head>
<body>
  <div id='container'>
    <div id="dashboard">
      <ul>
        <li>
          <%= link_to_unless_current 'Home', root_url %>
        </li>
        <li id='dashboard_options'>
          <% if user_signed_in? %>
            <%= current_user.username %>
            <%= link_to "設定", user_profile_path(current_user)%>
            <%= link_to "Sign out", destroy_user_session_path %>
          <% else %>
            <%= link_to "Sign up", new_user_registration_path %> or <%= link_to "sign in", new_user_session_path %>
          <% end %>
        </li>
      </div>

      <% flash.each do |name, msg| %>
        <%= content_tag :div, msg, :id => "flash_#{name}" %>
      <% end %>

      <div id='header'>
        <div id='logo'>
          <h2 id='logo'>傳承.</h2>
        </div>

        <div id="location">
          <%= user_current_view_location(params[:location]) %>
        </div>

        <div id='menus'>
          <ul id='main_menu'>
            <% if user_signed_in? %>
              <li><%= link_to "首頁", home_url %></li>
              <li><%= link_to "我的經驗", user_experiences_path(current_user)%></li>
            <% else %>
              <li><%= link_to "首頁", root_url %></li>
            <% end %>
            <li><%= link_to "解惑", questions_path %>
            </li>
            <li>
              <% form_tag search_url, :method => :get do %>
                Search: <%= text_field_tag :search, nil, :size => 10 %>
                <%= submit_tag 'Search', :name => nil %>
              <% end %>
            </li>
            <li>
              <div id="cse" style="width: 200px;">Loading</div>
            </li>
          </ul>
        </div>

      </div>

    <div id='layout'>
      <%= yield %>
      <%= yield :sider %>
    </div>

  </div>
  <%= yield :bottom_js %>
  <%= javascript_include_tag 'application', 'colorPicker' %>
      <script src="http://www.google.com/jsapi" type="text/javascript"></script>
      <script type="text/javascript">
        google.load('search', '1');
        google.setOnLoadCallback(function() {
            var customSearchControl = new google.search.CustomSearchControl('002732166184002343049:9tb3p8oqkj4');
            customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
            customSearchControl.draw('cse');
            }, true);
          </script>
          <link rel="stylesheet" href="http://www.google.com/cse/style/look/default.css" type="text/css" /> 

</body>
</html>
